Веб-приложение управления базой данных приюта для животных
-
Установка
-
Все зависимости python-пакетов перечислены в файле `requirements.txt`. Установка осуществляется следующей командой: 
```commandline
pip install -r requirements.txt
```

#### Настройка окружения
Настройки подключения к БД, различные токены и прочие индивидуальные настройки проекта, которые не должны быть доступны 
публично, размещаются в файле `.env`. Для удобства в каталоге `animals` проекта находится файл `.env-default`, в котором
указаны необходимые для начального запуска константы:
```.env
# Секретный ключ приложения Django
DJANGO_SECRET_KEY=

# Режим отладки
DEBUG=

# Строка подключения к БД
DATABASE_URL=
```   
Допустимо указать значения и переименовать файл в `.env`.

Далее создаем базу данных (для примера PostgreSQL):

```postgresql
CREATE DATABASE animals
  WITH OWNER = postgres
    ENCODING = 'UTF8'
    TABLESPACE = pg_default
    TEMPLATE = template0;
```

Затем создаем миграции:
```commandline
manage.py makemigrations
```
И применяем их:
```commandline
manage.py migrate
```

Ролевая модель
-
Основными моделями приложения являются модели Animals (Постояльцы) и Shelter (Приют). Дополнительно стандартная модель 
User через OneToOneField расширена моделью ShelterUser, связывающей Пользователя и Приют.

Доступ к базе данных разграничен для трех групп пользователей:
- admins &ndash; создание, редактирование, чтение, мягкое удаление
- users &ndash; создание, редактирование, чтение
- guests (не авторизованный доступ) просмотр

#### Создание пользователей
_(Для нового проекта и пустой БД)_ Для входа в админку создаем суперпользователя. В качестве имени пользователя укажем `admin`, пароля &ndash; `admin`:
```commandline
(.venv) D:\Path\To\Project>manage.py createsuperuser
Имя пользователя (leave blank to use 'Vladimir'): admin
Адрес электронной почты:
Password:
Password (again):
Введённый пароль слишком похож на имя пользователя.
Введённый пароль слишком короткий. Он должен содержать как минимум 8 символов.
Введённый пароль слишком широко распространён.
Bypass password validation and create user anyway? [y/N]: y
Superuser created successfully.
```
#### Создание групп пользователей
Откроем страницу авторизации в админку (по умолчанию `http://127.0.0.1:8000/admin`) и авторизуемся под только что 
созданным суперпользователем. В разделе "Пользователи и группы" создадим две группы: `Admins` и `Users`, при этом окно
"выбранные права" оставим незаполненным.

В последующем при создании пользователей и для предоставления им доступа к работе с данными необходимо включать их в 
соответствующие вышесозданные группы.

Для полноценной работы пользователя необходимо установить его связь с определенной записью приюта, с которым в 
последующем будут связаны записи о постояльцах и осуществляться работа с приложением в целом:
![Созданине пользователя](figures/user_new.jpg)

Навигация и интерфейс
-
Все операции от корня сайта:
- / &ndash; Список всех постояльцев (пагинация по 10 записей на страницу) (доступ для guest и выше);
- /create/ &ndash; создание записи (user и выше);
- /view/\<id>/ &ndash; просмотр записи по id (guest и выше);
- /edit/\<id>/ &ndash; изменение записи по id (user и выше);
- /delete/\<id>/ &ndash; удаление записи по id (только admin).

REST API
-
Авторизация по адресу `/api/token-auth/`. Методом POST необходимо отправить form-data с параметрами `username` и `password`.
В случае успешной авторизации сервер вернет ответ в формате json:

```json
{
    "token": "fb38d610afe2bfeb5eb85975fd169aaf7bc38559"
}
```

В дальнейшем для авторизованного доступа в запросе необходимо отправлять заголовок с ключом `Authorization` и значением 
полученного ключа с префиксом Token, отделенным от него пробелом:

`Authorization: Token fb38d610afe2bfeb5eb85975fd169aaf7bc38559`

Методы работы с данными:
- `GET` /api/animals/ &ndash; список всех постояльцев (доступ для guest и выше);
- `POST` /api/animals/ &ndash; создание записи (user и выше);
- `PUT` /api/animals/\<id> &ndash; изменение записи по id (user и выше);
- `DELETE` /api/animals/\<id> &ndash; удаление записи по id (только admin).